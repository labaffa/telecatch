<!doctype html>
<html>

    <!-- HEAD -->
    <head>
        <title>TeleDash</title> <!-- may want to replace with jinja variable pulled through? -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
        <link rel="stylesheet/less" type="text/css" href="{{ url_for('static', path='/css/style.less') }}">
        <link rel="stylesheet/less" type="text/css" href="{{ url_for('static', path='/css/navbar.css') }}">
        <script src="https://cdn.jsdelivr.net/npm/less" ></script>
        <!-- Specify body min-height to fill the page if not full already -->
        <style>
            body {
                height: 100vh;
                height: -webkit-fill-available;
                margin: 0;
            }
        </style>
    </head>

    <!-- Body of the webpage -->
    <body class="d-flex flex-column">
        {% include "explorer/navbar.html" %}
        <div class="container cloche d-flex nowrap">
            <div class="control d-flex flex-column">
                <div class="inputs d-flex">
                    <div class="search-box">
                        <label class="search" for="inpt_search">
                                <input id="inpt_search" type="text" />
                        </label>
                        <p>Search on Telegram</p>
                    </div>
                    <div class="filters d-flex">
                    
                            <div class="cntr-box dates">
                                <div class="cntr-ele">
                                    <label for="start-date">Start date:</label>
                                    <input type="date" id="start-date">
                                </div>
                                <div class="cntr-ele">
                                    <label for="end-date">End date:</label>
                                    <input type="date" id="end-date">
                                </div>
                            </div>
                        <div class="cntr-box misc">
                            <div class="cntr-ele">
                                <label for="chat-type">Chat type:</label>
                                <select name="chat-type" id="chat-type">
                                    <option value="">--Select Chat type--</option>
                                    <option value="channel">Channel</option>
                                    <option value="group">Group</option>
                                    <option value="">Any</option>
                                </select>
                            </div>
                            <div class="cntr-ele">
                                <label for="data-range">Scraping method:</label>
                                <select name="data-range" id="data-range">
                                    <option value=0>Show on table</option>
                                    <option value=1>Export</option>
                                </select>
                            </div>
                            <div class="cntr-ele">
                                <label for="export-format">Export format:</label>
                                <select name="export-format" id="export-format">
                                    <option value="csv">CSV</option>
                                    <option value="json">JSON</option>
                                    <option value="zip">ZIP (download media)</option>
                                </select>
                            </div>
                            
                            <!-- <div class="cntr-ele">
                                <label for="collections">Collections:</label>
                                <select name="collections" id="collections">
                                    {% for coll in collections %}
                                        <option value="{{coll}}">{{coll}}</option>
                                    {% endfor %}
                                </select>
                            </div> -->
                        </div>
                    </div>
                </div>
                <!-- <div class="cntr-limit">
                    <label class="limit" for="inpt_limit">
                            <input id="inpt_limit" type="number" min="1" max="10000"/>
                        </label>
                        <p>Max messages (1-1000)</p>
                </div> -->
                <div class="actions">
                    <div class="container">
                        <button class="tg-button" id="submitButton">Submit</button>
                        <!-- <p style="visibility: hidden;">placeholder</p> -->
                    </div>
                </div>
                
            </div>

            <div class="monitor d-flex" >
                <div class="flex-column">
                    <div class="info-badge">
                        <select name="channels" id="channels"></select>
                    </div>
                    <div class="info-badge">
                        <select name="groups" id="groups"></select>
                    </div>
                    <div class="info-badge">
                        <select name="counts" id="counts"></select>
                    </div>
                    <div class="info-badge">
                        <select name="participants" id="participants"></select>
                    </div>
                </div>
                <!-- <div>
                    <div class="cntr-ele">
                        <label for="add-chat">Add channel or group:</label>
                        <input type="text" id="add-chat" placeholder="[url or username]">
                        <input type="submit" value="Add" id="add-chat-btn">
                    </div>
                    <div class="cntr-ele">
                        <label for="remove-chat">Remove channel or group:</label>
                        <input type="text" id="remove-chat" placeholder="[url]">
                        <input type="submit" value="Remove" id="remove-chat-btn">
                    </div>
                </div> -->
            </div>
        </div>
        <div class="d-flex justify-content-center">
            <h1> Results </h1>
        </div>
        <div class="container results d-flex m-4">
            <div id="timeline-chart" class="d-flex flex-column">
                <div id="histo-caption"></div>
                <div id="histo" class="svg-container"></div>
            </div>
            <div class="tab-section">
                <!-- <div class="cntr-export">
                    <a href="#"  id="export-messages">Export messages</a>
                    
                </div> -->
                <table id="results-table" data-page="1" class="tg-messages">
                    <thead>
                        <tr>
                            <th>Username</th>
                            <th>Message</th>
                            <th>Timestamp</th>
                            <th>Type</th>
                            <th>Country</th>
                            <th>Views</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div id="pagination" style="gap: 3px;">
                    <a href="#"  id="page-dw">Previous</a>
                    <span id="page-number"> 1 </span>
                    <a href="#"  id="page-up">Next</a>
                </div>
            </div>
        </div>
        <script>
        var allChannels = JSON.parse('{{all_channels|tojson}}');
        var channelUrls = JSON.parse('{{channel_urls|tojson}}');
        var activeClient = JSON.parse('{{active_client|tojson}}');
        var activeCollection = JSON.parse('{{active_collection|tojson}}');
        </script>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
        <script src="{{url_for('static', path='/js/main.js').include_query_params(version='5') }}"></script>
    </body>
    
</html>
